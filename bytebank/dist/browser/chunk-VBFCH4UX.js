import{a as T,b as k,c as O,d as w,e as V,f as $,g as H,h as N,i as j,j as z,k as A,l as F,m as Q,n as U,o as B,p as q,q as S,r as G,s as x,t as J,u as K}from"./chunk-JLM5XJLQ.js";import{a as X}from"./chunk-FEC7MS43.js";import"./chunk-NWELVF2E.js";import"./chunk-7N6LDA7G.js";import{j as L,k as I,la as R}from"./chunk-XGI67S2B.js";import"./chunk-EJJBCPAK.js";import{$b as v,Ab as _,Bb as d,Cb as s,Eb as y,Hb as E,Jb as W,Nb as g,Ob as C,Pb as h,Tb as o,Va as l,Vb as p,Wa as f,_b as D,ha as b,kb as c,pa as M,pb as u,qa as P,yb as n,zb as i}from"./chunk-2M3RSBYZ.js";var ee=()=>["/addWallet"],te=()=>[5,10,20];function ae(t,a){t&1&&(n(0,"th",23),o(1," No. "),i())}function ne(t,a){if(t&1&&(n(0,"td",24),o(1),i()),t&2){let e=a.$implicit;l(),p(" ",e.id," ")}}function ie(t,a){t&1&&(n(0,"th",23),o(1," Nombre "),i())}function oe(t,a){if(t&1&&(n(0,"td",24),o(1),i()),t&2){let e=a.$implicit;l(),p(" ",e.nombreCartera," ")}}function re(t,a){t&1&&(n(0,"th",23),o(1," TCEA "),i())}function le(t,a){if(t&1&&(n(0,"td",24),o(1),i()),t&2){let e=a.$implicit;l(),p(" ",e.tcea," ")}}function me(t,a){t&1&&(n(0,"th",23),o(1," Valor Recibido "),i())}function ce(t,a){if(t&1&&(n(0,"td",24),o(1),i()),t&2){let e=a.$implicit;l(),p(" ",e.valorRecibido," ")}}function de(t,a){t&1&&(n(0,"th",23),o(1," Valor Entregado "),i())}function se(t,a){if(t&1&&(n(0,"td",24),o(1),i()),t&2){let e=a.$implicit;l(),p(" ",e.valorEntregado," ")}}function pe(t,a){t&1&&(n(0,"th",23),o(1," Fecha de descuento "),i())}function ue(t,a){if(t&1&&(n(0,"td",24),o(1),i()),t&2){let e=a.$implicit;l(),p(" ",e.fechaDescuento," ")}}function fe(t,a){t&1&&(n(0,"th",23),o(1," Plazo de operaci\xF3n "),i())}function _e(t,a){if(t&1&&(n(0,"td",24),o(1),i()),t&2){let e=a.$implicit;l(),p(" ",e.plazoOperacion," ")}}function ge(t,a){t&1&&_(0,"tr",25)}function Ce(t,a){if(t&1){let e=y();n(0,"tr",26),E("click",function(){let r=M(e).$implicit,Z=W();return P(Z.getRow(r))}),i()}}var Y=class t{constructor(a,e){this.walletController=a;this.router=e}displayedColumns=["position","name","tcea_value","received_value","delivered_value","discount_date","operation_term"];dataSource=new q;paginator;sort;ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.checkUserId(),this.paginator&&(this.paginator._intl.itemsPerPageLabel="Items")}checkUserId(){let a=localStorage.getItem("userId"),e=a?parseInt(a):NaN;isNaN(e)&&(localStorage.removeItem("userId"),localStorage.removeItem("username"),localStorage.removeItem("token"),this.router.navigate(["/login"])),this.getWallets(e)}getWallets(a){this.walletController.getUserWallet(a).subscribe(e=>{if(Array.isArray(e)){let m=e.map(r=>new w(r.id,r.userId,r.nombreCartera,r.plazoOperacion,r.fechaDescuento,r.tcea,r.valorRecibido,r.valorEntregado));this.dataSource.data=m}else if(e&&typeof e=="object"){let m=[new w(e.id,a,e.nombreCartera,e.plazoOperacion,e.fechaDescuento,e.tcea,e.valorRecibido,e.valorEntregado)];this.dataSource.data=m}else console.error("Response is neither an array nor an object:",e)},e=>{console.error("Error while fetching wallets:",e)})}getRow(a){this.router.navigateByUrl(`/walletDetail/${a.nombreCartera}`)}static \u0275fac=function(e){return new(e||t)(f(X),f(L))};static \u0275cmp=b({type:t,selectors:[["app-wallet-list-page"]],viewQuery:function(e,m){if(e&1&&(g(S,5),g(x,5)),e&2){let r;C(r=h())&&(m.paginator=r.first),C(r=h())&&(m.sort=r.first)}},standalone:!0,features:[D],decls:38,vars:7,consts:[[1,"container"],[1,"content"],[1,"top-row","flex","justify-between","items-center","mt-10","mb-10"],[1,"title","text-blue-950"],[1,"m-0"],[1,"flex","items-center"],["mat-raised-button","","color","primary","type","button",1,"custom-button","w-auto","max-sm:w-full",3,"routerLink"],[1,"wallets-table-container"],[1,"wallets-table"],["mat-table","","matSort","",1,"w-full",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","tcea_value"],["matColumnDef","received_value"],["matColumnDef","delivered_value"],["matColumnDef","discount_date"],["matColumnDef","operation_term"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","role","row","tabindex","0",3,"click",4,"matRowDef","matRowDefColumns"],[1,"flex","justify-center","mt-4"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row","","role","row","tabindex","0",3,"click"]],template:function(e,m){e&1&&(n(0,"mat-sidenav-container",0)(1,"mat-sidenav-content")(2,"div",1)(3,"div",2)(4,"div",3)(5,"h2",4),o(6,"Carteras"),i()(),n(7,"div",5)(8,"button",6),o(9,"Agregar Cartera"),i()()(),n(10,"div",7)(11,"div",8)(12,"table",9),d(13,10),c(14,ae,2,0,"th",11)(15,ne,2,1,"td",12),s(),d(16,13),c(17,ie,2,0,"th",11)(18,oe,2,1,"td",12),s(),d(19,14),c(20,re,2,0,"th",11)(21,le,2,1,"td",12),s(),d(22,15),c(23,me,2,0,"th",11)(24,ce,2,1,"td",12),s(),d(25,16),c(26,de,2,0,"th",11)(27,se,2,1,"td",12),s(),d(28,17),c(29,pe,2,0,"th",11)(30,ue,2,1,"td",12),s(),d(31,18),c(32,fe,2,0,"th",11)(33,_e,2,1,"td",12),s(),c(34,ge,1,0,"tr",19)(35,Ce,1,0,"tr",20),i(),n(36,"div",21),_(37,"mat-paginator",22),i()()()()()()),e&2&&(l(8),u("routerLink",v(5,ee)),l(4),u("dataSource",m.dataSource),l(22),u("matHeaderRowDef",m.displayedColumns),l(),u("matRowDefColumns",m.displayedColumns),l(2),u("pageSizeOptions",v(6,te)))},dependencies:[k,T,O,R,z,$,N,j,Q,A,S,U,F,x,J,V,B,H,G,K,I],styles:[".container[_ngcontent-%COMP%]{height:100vh;background-color:#f9fafb;display:flex;justify-content:center;align-items:center;padding:0 20px}.content[_ngcontent-%COMP%]{width:100%;padding-top:1rem;padding-bottom:1rem}h2[_ngcontent-%COMP%]{font-size:24px;font-weight:450;margin:0}.custom-button[_ngcontent-%COMP%]{background-color:#0a2c3d!important;color:#fff!important;border-radius:8px!important;box-shadow:none!important}.custom-button[_ngcontent-%COMP%]:hover{background-color:#fff!important;color:#0a2c3d!important}.wallets-table-container[_ngcontent-%COMP%]{overflow-x:auto}@media (max-width: 600px){.wallets-table[_ngcontent-%COMP%]{max-width:100%}}"]})};export{Y as WalletListPageComponent};
